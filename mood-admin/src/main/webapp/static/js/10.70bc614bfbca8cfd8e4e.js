webpackJsonp([10],{cTs3:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.spec-button{\r\n  height: 60px;\r\n  padding: 10px;\n}\n.name{\r\n  width: 200px;\r\n  margin-left: 50px;\n}\r\n",""])},"e+iX":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("EFWR"),i=r.a.ajax,n=r.a.api,s=r.a.setOldPager,l=r.a.getOldPager,o=r.a.dateFormat,p={data:function(){return{tableData:[],currentPage:2,total:0,pager:{orderSn:"",orderStatus:"",pageIndex:0,pageSize:10,orderBy:"create_time desc"},options:[{value:10,label:"待支付"},{value:20,label:"待发货"},{value:30,label:"待收货"},{value:40,label:"已确认"},{value:100,label:"已取消"}],shippingView:!1,shippingForm:{id:"",username:"",mobile:"",provinceName:"",cityName:"",areaName:"",address:"",shippingCode:""}}},mounted:function(){var e=l();null!=e&&""!==e&&(this.pager=e),this.getPager()},methods:{toData:function(e,t){return o(e,t)},handleSizeChange:function(e){this.pager.pageSize=e,this.getPager()},handleCurrentChange:function(e){this.pager.pageIndex=e,this.getPager()},getPager:function(){var e=this;i(n.orderPager,"POST",this.pager,function(t){e.tableData=t.list,e.total=t.total,e.pager.pageIndex=t.pageIndex,t.pageIndex>t.maxPages&&(e.pager.pageIndex=t.maxPages,e.getPager())})},toDetailsView:function(e){s(this.pager),this.$router.push({name:"OrderDetails",query:{id:e}})},toUpdateView:function(e){s(this.pager),this.$router.push({name:"OrderUpdate",query:{id:e}})},toShippingView:function(e){this.getDetails(e),this.shippingView=!0},getDetails:function(e){var t=this;i(n.orderSelect,"POST",{id:e},function(e){t.shippingForm.id=e.id,t.shippingForm.username=e.address.username,t.shippingForm.mobile=e.address.mobile,t.shippingForm.provinceName=e.address.provinceName,t.shippingForm.cityName=e.address.cityName,t.shippingForm.areaName=e.address.areaName,t.shippingForm.address=e.address.address})},orderShipping:function(){var e=this;i(n.orderShipping,"POST",this.shippingForm,function(t){e.getPager(),e.shippingView=!1,e.$message({type:"success",message:"发货成功!"})})},handleDelete:function(e){var t=this;this.$confirm("确认删除该订单吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i(n.agentDelete,"DELETE",{id:e},function(e){t.$message({type:"success",message:"删除成功!"}),t.getPager()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order"},[a("el-row",{staticClass:"spec-button"},[a("el-input",{staticClass:"name",attrs:{placeholder:"订单号"},model:{value:e.pager.orderSn,callback:function(t){e.$set(e.pager,"orderSn",t)},expression:"pager.orderSn"}}),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getPager},model:{value:e.pager.orderStatus,callback:function(t){e.$set(e.pager,"orderStatus",t)},expression:"pager.orderStatus"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{on:{click:e.getPager}},[e._v("查询")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderSn",label:"订单号",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"buyerName",label:"买家",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:e.toData,width:"165"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shouldPrice",label:"订单总金额",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"payPrice",label:"支付金额",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentName",label:"支付方式",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[10==t.row.orderStatus?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v("待付款")]):e._e(),e._v(" "),20==t.row.orderStatus?a("el-tag",{attrs:{size:"small",type:"success"}},[e._v("待发货")]):e._e(),e._v(" "),30==t.row.orderStatus?a("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("待收货")]):e._e(),e._v(" "),40==t.row.orderStatus?a("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("已确认")]):e._e(),e._v(" "),100==t.row.orderStatus?a("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("已取消")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.toDetailsView(t.row.id)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.toUpdateView(t.row.id)}}},[e._v("编辑")]),e._v(" "),20==t.row.orderStatus?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.toShippingView(t.row.id)}}},[e._v("发货")]):e._e(),e._v(" "),100==t.row.orderStatus?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.row.id)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pager.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"发货",visible:e.shippingView,width:"500px"},on:{"update:visible":function(t){e.shippingView=t}}},[a("el-form",{ref:"form",attrs:{model:e.shippingForm,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"收货人"}},[a("span",[e._v(e._s(e.shippingForm.username))])]),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("span",[e._v(e._s(e.shippingForm.mobile))])]),e._v(" "),a("el-form-item",{attrs:{label:"收货地址"}},[a("span",[e._v(e._s(e.shippingForm.address))])]),e._v(" "),a("el-form-item",{attrs:{label:"快递单号"}},[a("el-input",{model:{value:e.shippingForm.shippingCode,callback:function(t){e.$set(e.shippingForm,"shippingCode",t)},expression:"shippingForm.shippingCode"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.orderShipping("form")}}},[e._v("发货")]),e._v(" "),a("el-button",{on:{click:function(t){e.shippingView=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var d=a("vSla")(p,u,!1,function(e){a("gtu7")},null,null);t.default=d.exports},gtu7:function(e,t,a){var r=a("cTs3");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("c489ea5e",r,!0)}});