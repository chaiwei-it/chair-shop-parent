webpackJsonp([8],{"1bjG":function(e,t,a){var s=a("m6mE");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("8bSs")("04da55e0",s,!0)},"46Cm":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("EFWR"),l=s.a.ajax,o=s.a.api,r=s.a.getOldPager,n=s.a.dateFormat,i={data:function(){return{tableData:[],addView:!1,updateView:!1,pager:{name:"",classId:"",pageIndex:1,pageSize:10,orderBy:"sort_num asc"},goodsClass:[],form:{id:"",name:"",classId:"",specIds:[],showStatus:"",sortNum:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{max:16,message:"名称最长为16位",trigger:"blur"}]},specList:[],total:0}},mounted:function(){var e=r();null!=e&&""!==e&&(this.pager=e),this.getPager(),this.getClassList()},methods:{toData:function(e,t){return n(e,t)},handleSizeChange:function(e){this.pager.pageSize=e,this.getPager()},handleCurrentChange:function(e){this.pager.pageIndex=e,this.getPager()},getPager:function(){var e=this;l(o.goodsTypePager,"POST",this.pager,function(t){e.tableData=t.list,e.total=t.total,e.pager.pageIndex=t.pageIndex,t.pageIndex>t.maxPages&&(e.pager.pageIndex=t.maxPages,e.getPager())})},getClassList:function(){var e=this;l(o.goodsClassList,"POST",{},function(t){e.goodsClass=t.list})},getSpecList:function(){var e=this;l(o.specList,"POST",{},function(t){e.specList=t.list})},handleDelete:function(e){var t=this;this.$confirm("确认删除该类型吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l(o.goodsTypeDelete,"POST",{id:e},function(e){t.$message({type:"success",message:"删除成功!"}),t.getPager()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},toUpdateView:function(e){this.vacant(),this.getDetails(e),this.getSpecList(),this.updateView=!0},toAddView:function(){this.vacant(),this.getSpecList(),this.addView=!0},add:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;l(o.goodsTypeAdd,"POST",t.form,function(e){t.addView=!1,t.getPager(),t.$message({message:"添加成功",type:"success"})})})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;l(o.goodsTypeUpdate,"POST",t.form,function(e){t.updateView=!1,t.getPager(),t.$message({message:"修改成功",type:"success"})})})},getDetails:function(e){var t=this;l(o.goodsTypeSelect,"POST",{id:e},function(e){t.form.id=e.id,t.form.name=e.name,t.form.classId=e.classId,t.form.specIds=e.specIds,t.form.showStatus=e.showStatus,t.form.sortNum=e.sortNum})},vacant:function(){this.form.id="",this.form.name="",this.form.classId="",this.form.specIds="",this.form.showStatus="",this.form.sortNum=""}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goodsType"},[a("el-row",{staticClass:"spec-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.toAddView}},[e._v("添加")]),e._v(" "),a("el-input",{staticClass:"name",attrs:{placeholder:"名称"},model:{value:e.pager.name,callback:function(t){e.$set(e.pager,"name",t)},expression:"pager.name"}}),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"全部"},on:{change:e.getPager},model:{value:e.pager.classId,callback:function(t){e.$set(e.pager,"classId",t)},expression:"pager.classId"}},e._l(e.goodsClass,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-button",{on:{click:e.getPager}},[e._v("查询")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsClass.name",label:"分类",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"showStatus",label:"是否展示",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.showStatus?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v("已停用")]):e._e(),e._v(" "),1==t.row.showStatus?a("el-tag",{attrs:{size:"small",type:""}},[e._v("已启用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sortNum",label:"排序",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:e.toData,width:"165"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.toUpdateView(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.pager.pageIndex,"page-sizes":[5,10,20,40],"page-size":e.pager.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pager,"pageIndex",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:"添加",visible:e.addView,width:"500px"},on:{"update:visible":function(t){e.addView=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.classId,callback:function(t){e.$set(e.form,"classId",t)},expression:"form.classId"}},e._l(e.goodsClass,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"规格"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.specIds,callback:function(t){e.$set(e.form,"specIds",t)},expression:"form.specIds"}},e._l(e.specList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否展示"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.showStatus,callback:function(t){e.$set(e.form,"showStatus",t)},expression:"form.showStatus"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序编号"}},[a("el-input",{model:{value:e.form.sortNum,callback:function(t){e.$set(e.form,"sortNum",t)},expression:"form.sortNum"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.add("form")}}},[e._v("添加")]),e._v(" "),a("el-button",{on:{click:function(t){e.addView=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.updateView,width:"500px"},on:{"update:visible":function(t){e.updateView=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.classId,callback:function(t){e.$set(e.form,"classId",t)},expression:"form.classId"}},e._l(e.goodsClass,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"规格"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.specIds,callback:function(t){e.$set(e.form,"specIds",t)},expression:"form.specIds"}},e._l(e.specList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否展示"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.showStatus,callback:function(t){e.$set(e.form,"showStatus",t)},expression:"form.showStatus"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序编号"}},[a("el-input",{model:{value:e.form.sortNum,callback:function(t){e.$set(e.form,"sortNum",t)},expression:"form.sortNum"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update("form")}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.updateView=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var u=a("vSla")(i,c,!1,function(e){a("1bjG")},null,null);t.default=u.exports},m6mE:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.spec-button{\r\n  height: 60px;\r\n  padding: 10px;\n}\n.name{\r\n  width: 200px;\r\n  margin-left: 50px;\n}\r\n",""])}});