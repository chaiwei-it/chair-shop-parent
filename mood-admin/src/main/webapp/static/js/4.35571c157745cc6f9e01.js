webpackJsonp([4],{"IWF/":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.spec-button{\r\n  height: 60px;\r\n  padding: 10px;\n}\n.name{\r\n  width: 200px;\r\n  margin-left: 50px;\n}\r\n",""])},o7JN:function(e,t,a){var s=a("IWF/");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("8bSs")("2e5de21d",s,!0)},uMyE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("EFWR"),l=s.a.ajax,n=s.a.api,o=s.a.getOldPager,r=s.a.dateFormat,i={data:function(){return{tableData:[],pager:{name:"",classId:"",status:"",pageIndex:1,pageSize:10,orderBy:"create_time desc"},goodsClass:[],status:[{value:1,label:"即将发售"},{value:2,label:"正在售卖"},{value:3,label:"已下架"}],form:{id:"",name:"",classId:"",specIds:[],showStatus:"",sortNum:""},specList:[],total:0}},mounted:function(){var e=o();null!=e&&""!==e&&(this.pager=e),this.getPager(),this.getClassList()},methods:{toData:function(e,t){return r(e,t)},handleSizeChange:function(e){this.pager.pageSize=e,this.getPager()},handleCurrentChange:function(e){this.pager.pageIndex=e,this.getPager()},getPager:function(){var e=this;l(n.goodsPager,"POST",this.pager,function(t){e.tableData=t.list,e.total=t.total,e.pager.pageIndex=t.pageIndex,t.pageIndex>t.maxPages&&(e.pager.pageIndex=t.maxPages,e.getPager())})},getClassList:function(){var e=this;l(n.goodsClassList,"POST",{},function(t){e.goodsClass=t.list})},handleDelete:function(e){var t=this;this.$confirm("确认删除该类型吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l(n.goodsDelete,"POST",{id:e},function(e){t.$message({type:"success",message:"删除成功!"}),t.getPager()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},toUpdateStatus:function(e,t){var a=this,s={id:e,status:t};l(n.goodsUpdateStatus,"POST",s,function(e){a.$message({message:"修改成功",type:"success"}),a.getPager()})},toUpdateView:function(e){this.$router.push({name:"GoodsUpdate",params:{id:e}})},toAddView:function(){this.$router.push({name:"GoodsAdd"})},toDetailsView:function(e){this.$router.push({name:"GoodsDetails",params:{id:e}})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"spec-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.toAddView}},[e._v("添加")]),e._v(" "),a("el-input",{staticClass:"name",attrs:{placeholder:"名称"},model:{value:e.pager.name,callback:function(t){e.$set(e.pager,"name",t)},expression:"pager.name"}}),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"全部"},on:{change:e.getPager},model:{value:e.pager.classId,callback:function(t){e.$set(e.pager,"classId",t)},expression:"pager.classId"}},e._l(e.goodsClass,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"全部"},on:{change:e.getPager},model:{value:e.pager.status,callback:function(t){e.$set(e.pager,"status",t)},expression:"pager.status"}},e._l(e.status,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{on:{click:e.getPager}},[e._v("查询")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"thumbnailImage",label:"缩略图",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.thumbnailImage,width:"100",height:"100"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"className",label:"分类",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"类型",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"是否展示",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v("即将发售")]):e._e(),e._v(" "),2==t.row.status?a("el-tag",{attrs:{size:"small",type:""}},[e._v("正在售卖")]):e._e(),e._v(" "),3==t.row.status?a("el-tag",{attrs:{size:"small",type:""}},[e._v("已下架")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"costPrice",label:"成本",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"originalPrice",label:"原价",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"nowPrice",label:"现价",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"库存",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"sales",label:"销量",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:e.toData,width:"165"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.toUpdateView(t.row.id)}}},[e._v("编辑")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.toUpdateStatus(t.row.id,2)}}},[e._v("上架")]):e._e(),e._v(" "),2==t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.toUpdateStatus(t.row.id,3)}}},[e._v("下架")]):e._e(),e._v(" "),3==t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.toUpdateStatus(t.row.id,2)}}},[e._v("上架")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.pager.pageIndex,"page-sizes":[5,10,20,40],"page-size":e.pager.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pager,"pageIndex",t)}}})],1)},staticRenderFns:[]};var c=a("vSla")(i,u,!1,function(e){a("o7JN")},null,null);t.default=c.exports}});