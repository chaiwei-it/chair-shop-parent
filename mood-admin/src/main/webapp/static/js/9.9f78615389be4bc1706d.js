webpackJsonp([9],{"6r7k":function(e,t,a){var o=a("ZZ3x");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("8bSs")("79dd16c0",o,!0)},ZZ3x:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.spec-button{\r\n  height: 60px;\r\n  padding: 10px;\n}\n.name{\r\n  width: 200px;\r\n  margin-left: 50px;\n}\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 146px;\r\n  height: 146px;\r\n  line-height: 146px;\r\n  text-align: center;\n}\n.avatar {\r\n  width: 146px;\r\n  height: 146px;\r\n  display: block;\n}\r\n",""])},pyRw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("EFWR"),r=o.a.ajax,l=o.a.api,n=o.a.getOldPager,i=o.a.dateFormat,s={data:function(){return{tableData:[],addView:!1,updateView:!1,pager:{name:"",pageIndex:1,pageSize:10,orderBy:"sort_num asc"},form:{id:"",goodsId:"",keywords:"",sortNum:""},keywords:[{value:"newest",label:"最新商品"},{value:"hottest",label:"最火商品"},{value:"recommend",label:"推荐商品"}],total:0,fileUrl:l.uploadImage,dialogVisible:!1,dialogImageUrl:"",goodsList:[]}},mounted:function(){var e=n();null!=e&&""!==e&&(this.pager=e),this.getPager()},methods:{toData:function(e,t){return i(e,t)},handleSizeChange:function(e){this.pager.pageSize=e,this.getPager()},handleCurrentChange:function(e){this.pager.pageIndex=e,this.getPager()},getPager:function(){var e=this;r(l.extensionPager,"POST",this.pager,function(t){e.tableData=t.list,e.total=t.total,e.pager.pageIndex=t.pageIndex,t.pageIndex>t.maxPages&&(e.pager.pageIndex=t.maxPages,e.getPager())})},handleDelete:function(e){var t=this;this.$confirm("确认删除该规格吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r(l.extensionDelete,"POST",{id:e},function(e){t.$message({type:"success",message:"删除成功!"}),t.getPager()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},toUpdateView:function(e){this.vacant(),this.getDetails(e),this.updateView=!0,this.getGoodList()},toAddView:function(){this.vacant(),this.addView=!0,this.getGoodList()},getGoodList:function(){var e=this;r(l.goodsList,"POST",this.pager,function(t){e.goodsList=t.list})},add:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;r(l.extensionAdd,"POST",t.form,function(e){t.addView=!1,t.getPager(),t.$message({message:"添加成功",type:"success"})})})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;r(l.extensionUpdate,"POST",t.form,function(e){t.updateView=!1,t.getPager(),t.$message({message:"修改成功",type:"success"})})})},getDetails:function(e){var t=this;r(l.extensionSelect,"POST",{id:e},function(e){t.form.id=e.id,t.form.keywords=e.keywords,t.form.goodsId=e.goodsId,t.form.sortNum=e.sortNum})},vacant:function(){this.form.id="",this.form.keywords="",this.form.goodsId="",this.form.sortNum=""}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"extension"},[a("el-row",{staticClass:"spec-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.toAddView}},[e._v("添加")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getPager},model:{value:e.pager.keywords,callback:function(t){e.$set(e.pager,"keywords",t)},expression:"pager.keywords"}},e._l(e.keywords,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{on:{click:e.getPager}},[e._v("查询")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"keywords",label:"类型",width:"100",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["newest"==t.row.keywords?a("el-tag",{attrs:{size:"small",type:""}},[e._v("最新商品")]):e._e(),e._v(" "),"hottest"==t.row.keywords?a("el-tag",{attrs:{size:"small",type:""}},[e._v("最火商品")]):e._e(),e._v(" "),"recommend"==t.row.keywords?a("el-tag",{attrs:{size:"small",type:""}},[e._v("推荐商品")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"thumbnailImage",label:"商品图片",width:"100",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.goods?a("img",{attrs:{src:t.row.goods.thumbnailImage,width:"80",height:"80"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"goods.name",label:"商品名称",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"sortNum",label:"排序",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.toUpdateView(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.pager.pageIndex,"page-sizes":[5,10,20,40],"page-size":e.pager.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pager,"pageIndex",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:"添加",visible:e.addView,width:"500px"},on:{"update:visible":function(t){e.addView=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}},e._l(e.keywords,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"商品"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.goodsId,callback:function(t){e.$set(e.form,"goodsId",t)},expression:"form.goodsId"}},e._l(e.goodsList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"排序编号"}},[a("el-input",{model:{value:e.form.sortNum,callback:function(t){e.$set(e.form,"sortNum",t)},expression:"form.sortNum"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.add("form")}}},[e._v("添加")]),e._v(" "),a("el-button",{on:{click:function(t){e.addView=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.updateView,width:"500px"},on:{"update:visible":function(t){e.updateView=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}},e._l(e.keywords,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"商品"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.goodsId,callback:function(t){e.$set(e.form,"goodsId",t)},expression:"form.goodsId"}},e._l(e.goodsList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"排序编号"}},[a("el-input",{model:{value:e.form.sortNum,callback:function(t){e.$set(e.form,"sortNum",t)},expression:"form.sortNum"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update("form")}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.updateView=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var u=a("vSla")(s,d,!1,function(e){a("6r7k")},null,null);t.default=u.exports}});