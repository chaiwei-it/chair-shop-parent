webpackJsonp([16],{"2TVz":function(e,t,a){var l=a("TJaV");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a("8bSs")("30f30290",l,!0)},TJaV:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.spec-button{\r\n  height: 60px;\r\n  padding: 10px;\n}\n.name{\r\n  width: 200px;\r\n  margin-left: 50px;\n}\r\n",""])},md3T:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("EFWR"),r=l.a.ajax,s=l.a.api,i=l.a.dateFormat,n={data:function(){return{tableData:[],childTableData:[],childrenView:!1,updateView:!1,pager:{username:"",email:"",moible:"",status:"",pageIndex:0,pageSize:10,orderBy:"create_time desc"},childList:{username:"",parentId:"",num:0},form:{username:"",email:"",mobile:"",userNum:"",parentNum:"",balance:""},options:[{value:0,label:"全部"},{value:1,label:"一级"},{value:2,label:"二级"},{value:3,label:"三级"}],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{max:16,message:"用户名最长为16位",trigger:"blur"}],userNum:[{required:!0,message:"请输入用户编号",trigger:"blur"},{max:8,message:"用户编号最长为8位",trigger:"blur"}],parentNum:[{required:!0,message:"请输入上级编号",trigger:"blur"}],balance:[{required:!0,message:"请输入余额",trigger:"blur"}]},currentPage:1,total:0}},mounted:function(){this.getPager()},methods:{toData:function(e,t){return i(e,t)},handleSizeChange:function(e){console.log("每页"+e+"条"),this.pager.pageSize=e,this.getPager()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pager.pageIndex=e,this.getPager()},getPager:function(){var e=this;r(s.userRebatePager,"POST",this.pager,function(t){e.tableData=t.list,e.total=t.total})},handleDelete:function(e){var t=this;this.$confirm("确认删除该用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r(s.userDelete,"POST",{id:e},function(e){t.$message({type:"success",message:"删除成功!"}),t.getPager()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},toUpdateView:function(e){this.vacant(),this.getDetails(e),this.updateView=!0},toChildrenView:function(e){this.childTableData=[],this.childList.parentId=e,this.childList.num=0,this.getChildrenList(),this.childrenView=!0},getChildrenList:function(){var e=this;r(s.userRebateList,"POST",this.childList,function(t){e.childTableData=t.list})},getDetails:function(e){var t=this;r(s.userSelect,"POST",{id:e},function(e){t.form.id=e.id,t.form.username=e.username,t.form.userNum=e.userNum,t.form.email=e.email,t.form.mobile=e.mobile,e.parent?t.form.parentNum=e.parent.userNum:t.form.parentNum=0,t.form.balance=e.balance})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;r(s.userUpdate,"POST",t.form,function(e){t.updateView=!1,t.getPager(),t.$message({message:"修改成功",type:"success"})})})},vacant:function(){this.form.id="",this.form.username="",this.form.email="",this.form.mobile="",this.form.userNum="",this.form.parentNum="",this.form.status=""}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("el-row",{staticClass:"spec-button"},[a("el-input",{staticClass:"name",attrs:{placeholder:"名称"},model:{value:e.pager.username,callback:function(t){e.$set(e.pager,"username",t)},expression:"pager.username"}}),e._v(" "),a("el-button",{on:{click:e.getPager}},[e._v("查询")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userNum",label:"ID",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"层级",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"parent.username",label:"上级名称",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"parent.userNum",label:"上级ID",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"grade",label:"级别",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.grade?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v("普通会员")]):e._e(),e._v(" "),2==t.row.grade?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v("VIP会员")]):e._e(),e._v(" "),3==t.row.grade?a("el-tag",{attrs:{size:"small",type:""}},[e._v("总代理")]):e._e(),e._v(" "),4==t.row.grade?a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("区级合伙人")]):e._e(),e._v(" "),5==t.row.grade?a("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("市级合伙人")]):e._e(),e._v(" "),6==t.row.grade?a("el-tag",{attrs:{size:"small",type:"success"}},[e._v("省级合伙人")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"余额",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"加入时间",formatter:e.toData,width:"165"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.toUpdateView(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.toChildrenView(t.row.id)}}},[e._v("下级")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pager.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"下级代理",visible:e.childrenView,width:"1300px","lock-scroll":""},on:{"update:visible":function(t){e.childrenView=t}}},[a("el-row",{staticClass:"spec-button"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getChildrenList},model:{value:e.childList.num,callback:function(t){e.$set(e.childList,"num",t)},expression:"childList.num"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.childTableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userNum",label:"ID",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"层级",width:"80",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"parent.username",label:"上级名称",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"parent.userNum",label:"上级ID",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"grade",label:"级别",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.grade?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v("普通会员")]):e._e(),e._v(" "),2==t.row.grade?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v("VIP会员")]):e._e(),e._v(" "),3==t.row.grade?a("el-tag",{attrs:{size:"small",type:""}},[e._v("总代理")]):e._e(),e._v(" "),4==t.row.grade?a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("区级合伙人")]):e._e(),e._v(" "),5==t.row.grade?a("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("市级合伙人")]):e._e(),e._v(" "),6==t.row.grade?a("el-tag",{attrs:{size:"small",type:"success"}},[e._v("省级合伙人")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"余额",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"加入时间",formatter:e.toData,width:"165"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.updateView,width:"500px"},on:{"update:visible":function(t){e.updateView=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"ID",prop:"userNum"}},[a("el-input",{model:{value:e.form.userNum,callback:function(t){e.$set(e.form,"userNum",t)},expression:"form.userNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级ID",prop:"parentNum"}},[a("el-input",{model:{value:e.form.parentNum,callback:function(t){e.$set(e.form,"parentNum",t)},expression:"form.parentNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"余额",prop:"balance"}},[a("el-input",{model:{value:e.form.balance,callback:function(t){e.$set(e.form,"balance",t)},expression:"form.balance"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update("form")}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.updateView=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var u=a("vSla")(n,o,!1,function(e){a("2TVz")},null,null);t.default=u.exports}});